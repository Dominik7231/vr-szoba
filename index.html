<!-- index.html -->
<!doctype html>
<html lang="hu">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>UVR ‚Äî VR Szoba & UV Minigolf Kecskem√©ten</title>
  <meta name="description" content="VR szoba √©s UV minigolf egy helyen Kecskem√©ten. Bar√°ti program, sz√ºlinap, csapat√©p√≠t√©s ‚Äî online foglal√°s, rugalmas csomagok." />
  <meta name="color-scheme" content="light dark">
  <meta property="og:title" content="UVR ‚Äî VR Szoba & UV Minigolf" />
  <meta property="og:description" content="Cs√∫csmin≈ës√©g≈± VR-√©lm√©ny + neon UV minigolf p√°lya. Foglalj id≈ëpontot online!" />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="/vr-szoba/√öj%20logo.jpg" />

  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#5a8cff">

  <link rel="icon" type="image/jpeg" href="√öj%20logo.jpg">
  <link rel="icon" type="image/png" sizes="192x192" href="icon-192.png">
  <link rel="icon" type="image/png" sizes="512x512" href="icon-512.png">
  <link rel="apple-touch-icon" href="√öj%20logo.jpg">

  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-title" content="UVR">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <style>
    /* =========================
       DESIGN V4 ‚Äî NEON FUTURE
       ========================= */
    :root{
      /* Alapsz√≠nek */
      --bg:#070914;
      --surface:#0e1324;
      --surface-2:#111735;
      --text:#eef2ff;
      --muted:#a7b0d6;

      /* Brand */
      --brand:#5a8cff;
      --brand-2:#a857ff;
      --acid:#00ffd1;
      --ring:rgba(90,140,255,.35);

      /* Hat√°sok */
      --border: color-mix(in srgb, var(--text), transparent 88%);
      --shadow: 0 10px 30px rgba(0,0,0,.35), 0 0 0 1px rgba(255,255,255,.03) inset;
      --glow-strong: 0 0 24px color-mix(in srgb, var(--brand), transparent 40%), 0 0 48px color-mix(in srgb, var(--brand-2), transparent 65%);

      /* Tip√≥ */
      --round: .95rem;
    }
    @media (prefers-color-scheme: light){
      :root{
        --bg:#f6f7fb;
        --surface:#ffffff;
        --surface-2:#f3f6ff;
        --text:#0b1225;
        --muted:#5f6b8f;
        --border: color-mix(in srgb, var(--text), transparent 88%);
        --ring:rgba(90,140,255,.25);
      }
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    [hidden]{display:none!important}
    ::selection{background:color-mix(in srgb, var(--brand), transparent 60%); color:var(--text)}

    /* --- Glob√°l --- */
    body{
      margin:0; font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Ubuntu, "Noto Sans", Helvetica, Arial;
      color:var(--text); line-height:1.6;
      background: var(--bg);
      /* Dinamikus VR-h√°tt√©r: neon grid + gradient mesh + mozg√≥ zaj */
      background-image:
        radial-gradient(1200px 600px at 15% -10%, color-mix(in srgb, var(--brand), transparent 70%), transparent 60%),
        radial-gradient(1200px 700px at 110% 0%, color-mix(in srgb, var(--brand-2), transparent 70%), transparent 60%),
        linear-gradient(180deg, rgba(2,6,23,.65), rgba(2,6,23,.0) 40%, rgba(2,6,23,.7) 100%);
      overflow-x:hidden;
    }
    .bg-grid::before{
      content:""; position:fixed; inset:-200vmax; z-index:-1; pointer-events:none;
      background:
        repeating-linear-gradient( to right, rgba(120,144,255,.06) 0 1px, transparent 1px 120px ),
        repeating-linear-gradient( to bottom, rgba(120,144,255,.06) 0 1px, transparent 1px 120px );
      transform: perspective(800px) rotateX(60deg) translateY(35vh) scale(1.2);
      filter: drop-shadow(0 0 6px rgba(90,140,255,.25));
    }
    .noise::after{
      content:""; position:fixed; inset:0; z-index:-1; pointer-events:none; opacity:.05;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='240' height='240'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='2' stitchTiles='stitch'/%3E%3CfeColorMatrix type='saturate' values='0'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='.35'/%3E%3C/svg%3E");
      mix-blend-mode: overlay;
    }

    .container{width:min(1180px,92%); margin-inline:auto}
    a{color:inherit; text-decoration:none}
    img{max-width:100%; display:block}
    img.lightboxable{cursor:zoom-in}

    /* --- Header / Nav --- */
    header{
      position:sticky; top:0; z-index:100;
      backdrop-filter: blur(12px) saturate(1.2);
      background: color-mix(in srgb, var(--surface), transparent 65%);
      border-bottom:1px solid var(--border);
    }
    .nav{
      display:grid; grid-template-columns:auto 1fr auto; align-items:center;
      gap:.8rem 1rem; padding:.65rem 0;
    }
    .brand{display:inline-flex;align-items:center;gap:.6rem;font-weight:900;letter-spacing:.3px}
    .brand span{white-space:nowrap; background:linear-gradient(90deg,var(--brand),var(--brand-2)); -webkit-background-clip:text; background-clip:text; color:transparent}
    .brand-logo{width:32px;height:32px;border-radius:.7rem;object-fit:cover;display:block;box-shadow:var(--shadow)}
    .menu{
      display:flex;justify-content:flex-end;align-items:center;gap:.5rem 1rem;flex-wrap:wrap;
    }
    .menu a{opacity:.9}
    .menu a:hover{opacity:1}
    .nav-toggle{display:none;border:1px solid var(--border);background:transparent;color:var(--text);border-radius:.6rem;padding:.4rem .6rem}

    /* --- Gombok --- */
    .btn{display:inline-block;padding:.78rem 1.05rem;border-radius:1rem;border:1px solid var(--border);font-weight:800;letter-spacing:.2px;box-shadow:var(--shadow)}
    .btn-primary{
      background: radial-gradient(120% 120% at 10% 10%, var(--brand) 0 40%, color-mix(in srgb, var(--brand-2), white 10%) 100%);
      color:#fff;border-color:transparent; box-shadow: var(--glow-strong);
    }
    .btn-ghost{background:transparent;color:var(--text)}
    .btn-ghost:hover{border-color:color-mix(in srgb, var(--brand), transparent 55%); box-shadow:0 0 0 0 var(--ring)}
    .chip{display:inline-flex;align-items:center;gap:.45rem;padding:.35rem .7rem;border-radius:999px;border:1px solid color-mix(in srgb, var(--brand), transparent 65%); color:color-mix(in srgb, var(--brand), white 15%); font-size:.82rem; letter-spacing:.2px}

    /* --- Szekci√≥k / Layout --- */
    .section{padding:clamp(2.6rem,6vw,4.4rem) 0; position:relative}
    .section.alt{background:linear-gradient(180deg, color-mix(in srgb, var(--surface), transparent 15%), transparent)}
    .section .heading{
      display:flex; align-items:end; justify-content:space-between; gap:1rem; margin:0 0 .9rem;
    }
    .section h2{margin:0;font-size:clamp(1.7rem,3.2vw,2.4rem); line-height:1.15}
    .muted{color:var(--muted)}

    .grid{display:grid;gap:1rem}
    .features{grid-template-columns: repeat(auto-fit, minmax(220px, 1fr))}
    .pricing{grid-template-columns: repeat(auto-fit, minmax(240px, 1fr))}

    /* --- K√°rty√°k --- */
    .card{
      background: color-mix(in srgb, var(--surface), transparent 10%);
      border:1px solid var(--border);
      border-radius:1rem; padding:1rem; box-shadow:var(--shadow);
      position:relative; overflow:hidden;
    }
    .card::after{
      content:""; position:absolute; inset:-2px; z-index:-1; border-radius:inherit;
      background: linear-gradient(135deg, color-mix(in srgb, var(--brand), transparent 70%), transparent 40%, color-mix(in srgb, var(--brand-2), transparent 70%));
      filter: blur(18px); opacity:.25;
    }

    /* --- Hero (VR) --- */
    .hero{padding: clamp(3rem,9vw,7rem) 0; position:relative}
    .hero .badge{display:inline-flex; align-items:center; gap:.4rem; border:1px solid color-mix(in srgb, var(--acid), transparent 65%); color:color-mix(in srgb, var(--acid), white 20%); padding:.28rem .6rem; border-radius:999px; font-size:.82rem}
    .hero h1{font-size:clamp(2.1rem,4vw,3.2rem); line-height:1.1; margin:.35rem 0 .7rem; letter-spacing:.3px}
    .hero p{margin:0 0 1.1rem; color:var(--muted); max-width:65ch}
    .hero .metric{display:flex; gap:1rem; align-items:center; color:var(--muted); font-size:.95rem}
    .hero .grid-split{display:grid; grid-template-columns: 1.4fr .9fr; gap:1.2rem; align-items:center}
    @media (max-width: 900px){ .hero .grid-split{grid-template-columns:1fr} }

    .hero-visual{
      position:relative; aspect-ratio: 16/10; border-radius:1.2rem; overflow:hidden;
      background: radial-gradient(80% 80% at 80% 10%, color-mix(in srgb, var(--brand), transparent 65%), transparent 60%),
                  radial-gradient(100% 100% at 0% 100%, color-mix(in srgb, var(--brand-2), transparent 70%), transparent 60%),
                  linear-gradient(180deg, var(--surface-2), var(--surface));
      border:1px solid var(--border);
      box-shadow: var(--shadow), 0 0 60px rgba(90,140,255,.15) inset;
    }
    .hero-visual::before{
      /* ‚Äúfuturisztikus grid‚Äù a hero-ban */
      content:""; position:absolute; inset:-10%;
      background:
        repeating-linear-gradient( to right, rgba(120,144,255,.08) 0 1px, transparent 1px 42px ),
        repeating-linear-gradient( to bottom, rgba(120,144,255,.08) 0 1px, transparent 1px 42px );
      transform: perspective(800px) rotateX(55deg) translateY(12%);
      filter: drop-shadow(0 0 6px rgba(90,140,255,.25));
    }
    .hero-visual::after{
      content:""; position:absolute; inset:0; background: radial-gradient(50% 50% at 70% 30%, rgba(0,255,209,.15), transparent 40%);
      mix-blend-mode: screen;
    }

    /* --- K√©pek --- */
    .thumb-img{
      aspect-ratio:16/9; width:100%; height:auto;
      border:1px solid var(--border); border-radius:1rem; object-fit:cover; background:#0d0f17
    }

    /* --- ≈∞rlap --- */
    .form{display:grid;gap:1rem;max-width:680px}
    .field{display:grid;gap:.35rem}
    label{font-weight:700; font-size:.92rem}
    input,textarea,select{
      background: color-mix(in srgb, var(--surface), transparent 10%);
      color:var(--text); border:1px solid var(--border); border-radius:.8rem; padding:.78rem .9rem; font:inherit; outline:none
    }
    input:focus,textarea:focus,select:focus{border-color:var(--brand); box-shadow:0 0 0 .28rem var(--ring)}
    .error{color:#ff6b6b;min-height:1em; font-size:.9rem}
    .status{margin-top:.6rem;color:#8ae6a2}

    footer{border-top:1px solid var(--border);padding:1.2rem 0;text-align:center;color:var(--muted)}

    /* --- Scroll reveal --- */
    .reveal{opacity:0; transform: translateY(22px); transition: opacity .6s ease, transform .6s ease;}
    .reveal.show{opacity:1; transform:none;}
    @media (prefers-reduced-motion: reduce){ .reveal{transition:none} }

    /* --- Mod√°l / Lightbox --- */
    body.modal-open{overflow:hidden}
    .backdrop[hidden]{display:none}
    .backdrop{position:fixed; inset:0; z-index:1000; display:grid; place-items:center; background:rgba(8,10,20,.68); backdrop-filter:blur(14px); opacity:0; pointer-events:none; transition:opacity .25s ease;}
    .backdrop.show{opacity:1; pointer-events:auto}
    .modal-card{background: color-mix(in srgb, var(--surface), transparent 8%); border:1px solid var(--border); border-radius:1rem; padding:1.25rem; width:min(560px,92%); box-shadow:var(--shadow); position:relative;}
    .modal-title{margin:0 2.2rem .5rem 0; font-size:clamp(1.2rem,2.6vw,1.6rem)}
    .modal-text{color:var(--muted); margin:.25rem 0 0}
    .modal-close{position:absolute; top:.55rem; right:.55rem; border:1px solid var(--border); background:transparent; color:var(--text); border-radius:.6rem; padding:.3rem .55rem; font:inherit; cursor:pointer;}
    .tabs{display:flex; gap:.5rem; margin:.25rem 0 1rem}
    .tabs button{border:1px solid var(--border); background:transparent; color:var(--text); border-radius:.6rem; padding:.45rem .72rem; cursor:pointer; font-weight:700}
    .tabs button[aria-selected="true"]{background:var(--brand); color:#fff; border-color:transparent}

    .lightbox-card{ padding:0; background:transparent; border:none; box-shadow:none; width:min(96vw, 1200px); }
    .lightbox-figure{ margin:0; display:grid; gap:.6rem; justify-items:center; }
    #lightbox-img{ display:block; max-width:100%; max-height:calc(100svh - 6rem); width:auto; height:auto; object-fit:contain; border-radius:.9rem; box-shadow:var(--shadow); background:#0d0f17; }
    #lightbox-cap{ color:var(--muted); text-align:center; padding:0 .75rem; max-width:90ch; }

    /* --- Mobil men√º --- */
    @media (max-width: 920px){
      .nav{grid-template-columns:auto auto 1fr}
      .nav-toggle{display:inline-block}
      .menu{position:absolute; right:.6rem; top:3.3rem; display:none; flex-direction:column; align-items:stretch; gap:.6rem; background: color-mix(in srgb, var(--surface), transparent 8%); padding:.8rem; border-radius:.9rem; min-width:240px; border:1px solid var(--border); box-shadow:var(--shadow)}
      .menu.show{display:flex}
      .menu .btn{ text-align:center }
    }
  </style>
</head>
<body class="bg-grid noise">
  <!-- NYIT√ÅS √âRTES√çT≈ê -->
  <div id="opening-notice" class="backdrop" role="dialog" aria-modal="true" aria-labelledby="opening-title" hidden>
    <div class="modal-card">
      <button class="modal-close" type="button" aria-label="Bez√°r√°s" data-close>‚úï</button>
      <h2 id="opening-title" class="modal-title">Lehets√©ges megnyit√°s Okt√≥ber 14.</h2>
      <p class="modal-text">V√°runk szeretettel! K√∂sz√∂nj√ºk a t√ºrelmet.</p>
    </div>
  </div>

  <!-- AUTH MOD√ÅL -->
  <div id="auth-modal" class="backdrop" role="dialog" aria-modal="true" aria-labelledby="auth-title" hidden>
    <div class="modal-card">
      <button class="modal-close" type="button" aria-label="Bez√°r√°s" data-close>‚úï</button>
      <h2 id="auth-title" class="modal-title">Fi√≥k</h2>

      <div class="tabs" role="tablist" aria-label="Fi√≥k">
        <button id="tab-login" role="tab" aria-controls="panel-login" aria-selected="true">Bejelentkez√©s</button>
        <button id="tab-signup" role="tab" aria-controls="panel-signup" aria-selected="false">Regisztr√°ci√≥</button>
      </div>

      <div id="panel-login" role="tabpanel" aria-labelledby="tab-login">
        <form id="login-form" class="form" novalidate>
          <div class="field">
            <label for="login-email">E-mail</label>
            <input id="login-email" name="email" type="email" placeholder="te@pelda.hu" autocomplete="email" required>
            <small class="error"></small>
          </div>
          <div class="field">
            <label for="login-password">Jelsz√≥</label>
            <input id="login-password" name="password" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="current-password" required>
            <small class="error"></small>
          </div>
          <button class="btn btn-primary" type="submit">Bel√©pek</button>
          <p id="login-status" class="status" hidden></p>
        </form>
      </div>

      <div id="panel-signup" role="tabpanel" aria-labelledby="tab-signup" hidden>
        <form id="signup-form" class="form" novalidate>
          <div class="field">
            <label for="signup-email">E-mail</label>
            <input id="signup-email" name="email" type="email" placeholder="te@pelda.hu" autocomplete="email" required>
            <small class="error"></small>
          </div>
          <div class="field">
            <label for="signup-password">Jelsz√≥</label>
            <input id="signup-password" name="password" type="password" placeholder="Min. 6 karakter" autocomplete="new-password" required>
            <small class="error"></small>
          </div>
          <div class="field">
            <label for="signup-username">Felhaszn√°l√≥n√©v</label>
            <input id="signup-username" name="username" type="text" placeholder="pl. player123" autocomplete="nickname" minlength="3" maxlength="20" pattern="[a-zA-Z0-9_]{3,20}">
            <small class="error">3‚Äì20 karakter, csak bet≈±/sz√°m/‚Äû_‚Äù.</small>
          </div>
          <button class="btn btn-primary" type="submit">Regisztr√°lok</button>
          <p id="signup-status" class="status" hidden></p>
        </form>
      </div>
    </div>
  </div>

  <!-- PROFIL MOD√ÅL -->
  <div id="profile-modal" class="backdrop" role="dialog" aria-modal="true" aria-labelledby="profile-title" hidden>
    <div class="modal-card">
      <button class="modal-close" type="button" aria-label="Bez√°r√°s" data-close>‚úï</button>
      <h2 id="profile-title" class="modal-title">Profil</h2>
      <p class="modal-text">Itt tudod megadni vagy m√≥dos√≠tani a felhaszn√°l√≥neved.</p>

      <form id="profile-form" class="form" novalidate>
        <div class="field">
          <label for="profile-username">Felhaszn√°l√≥n√©v</label>
          <input id="profile-username" type="text" placeholder="pl. player123" autocomplete="nickname" minlength="3" maxlength="20" pattern="[a-zA-Z0-9_]{3,20}" required>
          <small class="error">3‚Äì20 karakter, csak bet≈±/sz√°m/‚Äû_‚Äù.</small>
        </div>
        <button class="btn btn-primary" type="submit">Ment√©s</button>
        <p id="profile-status" class="status" hidden></p>
      </form>
    </div>
  </div>

  <!-- LIGHTBOX MOD√ÅL -->
  <div id="lightbox-modal" class="backdrop" role="dialog" aria-modal="true" aria-labelledby="lightbox-cap" hidden>
    <div class="modal-card lightbox-card">
      <button class="modal-close" type="button" aria-label="Bez√°r√°s" data-close>‚úï</button>
      <figure class="lightbox-figure">
        <img id="lightbox-img" alt="">
        <figcaption id="lightbox-cap" class="modal-text"></figcaption>
      </figure>
    </div>
  </div>

  <a class="skip" href="#main">Ugr√°s a tartalomra</a>

  <header>
    <div class="container nav">
      <a href="#hero-vr" class="brand" aria-label="UVR log√≥">
        <img class="brand-logo" src="√öj%20logo.jpg" alt="UVR log√≥">
        <span>UVR</span>
      </a>

      <button class="nav-toggle" aria-expanded="false" aria-controls="site-menu" aria-label="Men√º">‚ò∞</button>
      <nav id="site-menu" class="menu" aria-label="F≈ëmen√º">
        <a href="#hero-vr">VR</a>
        <a href="#hero-golf">UV Minigolf</a>
        <a href="#news">√öjdons√°gok</a>
        <a href="#packages">Csomagok</a>
        <a href="#quest3">Quest 3</a>
        <a href="#faq">GYIK</a>
        <a href="#gallery">Gal√©ria</a>
        <a href="#contact">Kapcsolat</a>

        <span id="user-chip" class="btn btn-ghost chip" hidden>üëã <strong id="display-name"></strong></span>
        <a class="btn btn-ghost" href="#" id="open-auth">Bel√©p√©s</a>
        <a class="btn btn-ghost" href="#" id="open-profile" hidden>Profil</a>
        <a class="btn btn-ghost" href="#" id="logout-btn" hidden>Kijelentkez√©s</a>

        <a class="btn btn-primary" href="#booking">Foglal√°s</a>
      </nav>
    </div>
  </header>

  <main id="main">
    <!-- VR HERO ‚Äî √∫j elrendez√©s: sz√∂veg + futurisztikus vizu√°l -->
    <section id="hero-vr" class="hero">
      <div class="container">
        <div class="grid-split">
          <div>
            <span class="badge">VR √©lm√©ny</span>
            <h1>VR Szoba Kecskem√©ten ‚Äî csapatoknak, bulikhoz, √©lm√©nynek</h1>
            <p>Mer√ºlj el a virtu√°lis val√≥s√°gban cs√∫csmin≈ës√©g≈± headsetekkel √©s t√∂bbj√°t√©kos √©lm√©nyekkel. Ide√°lis bar√°ti programnak, sz√ºlet√©snapra, csapat√©p√≠t√©sre vagy randihoz.</p>
            <div class="actions" style="display:flex;gap:.8rem;flex-wrap:wrap;margin-top:1rem">
              <a class="btn btn-primary" href="#booking">Foglalok VR id≈ëpontot</a>
              <a class="btn btn-ghost" href="#features">Mit tudunk?</a>
            </div>
            <div class="metric" style="margin-top:1rem">
              <span>‚≠ê 4.9 √©rt√©kel√©s</span>
              <span>üë• 2‚Äì8 f≈ë / alkalom</span>
              <span>‚è±Ô∏è 60‚Äì180 perc</span>
            </div>
          </div>
          <div class="hero-visual" aria-hidden="true"></div>
        </div>
      </div>
    </section>

    <!-- UV Minigolf HERO -->
    <section id="hero-golf" class="hero alt">
      <div class="container">
        <div class="heading">
          <h2>Neonos UV Minigolf p√°lya ‚Äî minden koroszt√°lynak</h2>
          <span class="chip">√öj</span>
        </div>
        <p class="muted">F√©nyl≈ë akad√°lyok, vil√°g√≠t√≥ labd√°k √©s l√°tv√°nyos p√°ly√°k. T√∂k√©letes program csal√°ddal, bar√°tokkal vagy csapat√©p√≠t√©sre.</p>
        <div class="actions" style="display:flex;gap:.8rem;flex-wrap:wrap;margin-top:1rem">
          <a class="btn btn-primary" href="#booking">Foglalok Minigolf p√°ly√°t</a>
          <a class="btn btn-ghost" href="#gallery-golf">N√©zd meg a k√©peket</a>
        </div>
      </div>
    </section>

    <!-- √öjdons√°gok -->
    <section id="news" class="section">
      <div class="container">
        <div class="heading">
          <h2>√öjdons√°gok</h2>
          <p class="muted" style="margin:0">Friss h√≠rek a VR szob√°b√≥l √©s az UV minigolf p√°ly√°r√≥l.</p>
        </div>
        <div class="grid" style="grid-template-columns:repeat(auto-fit,minmax(260px,1fr))">
          <article class="card"><h3>‚≠ê Halloweeni UV h√©tv√©ge</h3><p>Tematikus p√°lyaf√©nyek √©s jelmezverseny. Okt. 31‚ÄìNov. 3.</p></article>
          <article class="card"><h3>üéÆ √öj VR-j√°t√©kok</h3><p>Kooperat√≠v t√∫l√©l≈ës √©s ritmusj√°t√©k √©rkezett ‚Äî pr√≥b√°ld ki!</p></article>
          <article class="card"><h3>üéÅ Aj√°nd√©kutalv√°nyok</h3><p>Meg√©rkeztek az √ºnnepi aj√°nd√©kk√°rty√°k ‚Äî k√©rd egyedi √ºzenettel.</p></article>
        </div>
      </div>
    </section>

    <!-- Quest 3 bemutat√≥ -->
    <section id="quest3" class="section alt">
      <div class="container">
        <div class="heading">
          <h2>√ârkezik a Quest 3 a UVR-be</h2>
          <span class="chip">K√∂vetkez≈ë gener√°ci√≥</span>
        </div>
        <p class="muted" style="max-width:65ch;margin:.2rem 0 1.2rem">
          K√∂vetkez≈ë gener√°ci√≥s VR a m√©g tiszt√°bb k√©p√©rt √©s stabilabb k√∂vet√©s√©rt. Pr√≥b√°ld ki n√°lunk
          az els≈ë k√∂z√∂tt Kecskem√©ten!
        </p>

        <div class="grid" style="grid-template-columns:repeat(auto-fit,minmax(280px,1fr));align-items:start">
          <figure class="card" style="padding:.6rem">
            <img class="thumb-img" src="quest3.jpg" alt="Meta Quest 3 VR headset ‚Äî el≈ëln√©zet" loading="lazy">
            <figcaption class="muted" style="padding:.4rem .4rem 0">A k√©pen: Quest 3 headset</figcaption>
          </figure>

          <article class="card" style="display:grid;gap:.6rem">
            <h3 style="margin:.2rem 0">Mi√©rt lesz jobb?</h3>
            <ul style="margin:0 0 0 1.1rem">
              <li>√âlesebb k√©p, gyorsabb panel ‚Äî m√©g kevesebb elmos√≥d√°s.</li>
              <li>Pontosabb k√∂vet√©s √©s k√©nyelmesebb illeszked√©s.</li>
              <li>V√©konyabb kialak√≠t√°s, jobb szell≈ëz√©s hosszabb j√°t√©khoz.</li>
              <li>Stabil t√∂bbj√°t√©kos √©lm√©ny csapatoknak √©s partikra.</li>
            </ul>
            <div style="display:flex;gap:.6rem;flex-wrap:wrap;margin-top:.4rem">
              <a class="btn btn-primary" href="#booking">Lefoglalom a kipr√≥b√°l√°st</a>
              <a class="btn btn-ghost" href="#gallery">VR k√©pek</a>
            </div>
          </article>
        </div>
      </div>
    </section>

    <!-- Features -->
    <section id="features" class="section">
      <div class="container">
        <div class="heading">
          <h2>Minden a felejthetetlen VR-√©lm√©ny√©rt</h2>
        </div>
        <p class="muted" style="max-width:65ch;margin:.2rem 0 1.2rem">K√©nyelmes t√©r, seg√≠t≈ëk√©sz szem√©lyzet, v√°ltozatos j√°t√©kok √©s csomagok ‚Äî csak hozz√°tok a k√≠v√°ncsis√°gotokat.</p>
        <div class="grid features">
          <article class="card"><h3>Vezetett √©lm√©ny</h3><p>J√°t√©kmester seg√≠t a be√°ll√≠t√°sokban √©s a j√°t√©k kiv√°laszt√°s√°ban.</p></article>
          <article class="card"><h3>Multiplayer & party</h3><p>J√°tsszatok egy√ºtt vagy egym√°s ellen ‚Äî ide√°lis sz√ºlinapra √©s csapat√©p√≠t√©sre.</p></article>
          <article class="card"><h3>Higi√©nia & biztons√°g</h3><p>Fert≈ëtlen√≠t√©s minden haszn√°lat el≈ëtt √©s ut√°n, egyedi arcp√°rn√°val.</p></article>
          <article class="card"><h3>Rugalmas foglal√°s</h3><p>Online id≈ëpontk√©r√©s, e-mail visszaigazol√°ssal √©s eml√©keztet≈ëvel.</p></article>
          <article class="card"><h3>Aj√°nd√©kk√°rtya</h3><p>Lepd meg szeretteidet VR utalv√°nnyal egyedi √ºzenettel.</p></article>
          <article class="card"><h3>K√∂zponti elhelyezked√©s</h3><p>K√∂nnyen megk√∂zel√≠thet≈ë helysz√≠n t√∂megk√∂zleked√©ssel is.</p></article>
        </div>
      </div>
    </section>

    <!-- Csomagok -->
    <section id="packages" class="section alt">
      <div class="container">
        <div class="heading">
          <h2>Csomagok ‚Äî VR & UV Minigolf</h2>
        </div>
        <p class="muted" style="max-width:65ch;margin:.2rem 0 1.2rem">Egyszer≈± √°rak, rugalmas id≈ëpontok. V√°laszd a neked val√≥t!</p>

        <h3 style="margin-top:1rem">VR csomagok</h3>
        <div class="grid pricing" style="margin-bottom:1.5rem">
          <article class="card">
            <h4>Alap VR</h4>
            <p style="font-weight:800;font-size:1.05rem;margin:.25rem 0 .5rem">7 990 Ft / f≈ë / √≥ra</p>
            <ul style="margin:0 0 .8rem 1.1rem">
              <li>1 VR √°llom√°s</li><li>J√°t√©kmester t√°mogat√°s</li><li>Alap j√°t√©kv√°laszt√©k</li>
            </ul>
            <a class="btn btn-primary" href="#booking">Foglalok</a>
          </article>
          <article class="card" style="position:relative;outline:2px solid var(--brand)">
            <span style="position:absolute;left:50%;transform:translateX(-50%);top:-.8rem;background:var(--brand);color:#fff;border-radius:999px;padding:.15rem .6rem;font-size:.75rem;font-weight:700">Legn√©pszer≈±bb</span>
            <h4>Csapat VR</h4>
            <p style="font-weight:800;font-size:1.05rem;margin:.25rem 0 .5rem">14 900 Ft / f≈ë / 2 √≥ra</p>
            <ul style="margin:0 0 .8rem 1.1rem">
              <li>2 VR √°llom√°s</li><li>Multiplayer m√≥dok</li><li>Fot√≥/vide√≥ k√©sz√≠t√©s</li>
            </ul>
            <a class="btn btn-primary" href="#booking">Foglalok</a>
          </article>
        </div>

        <h3>UV Minigolf csomagok</h3>
        <div class="grid pricing">
          <article class="card">
            <h4>Alap Minigolf</h4>
            <p style="font-weight:800;font-size:1.05rem;margin:.25rem 0 .5rem">2 990 Ft / f≈ë / 1 k√∂r</p>
            <ul style="margin:0 0 .8rem 1.1rem">
              <li>Neonos p√°lya</li><li>Vil√°g√≠t√≥ labd√°k</li><li>Alap pontlap</li>
            </ul>
            <a class="btn btn-primary" href="#booking">Foglalok</a>
          </article>
          <article class="card">
            <h4>Csapat Minigolf</h4>
            <p style="font-weight:800;font-size:1.05rem;margin:.25rem 0 .5rem">1,5 √≥ra / z√°rtk√∂r≈± p√°lya</p>
            <ul style="margin:0 0 .8rem 1.1rem">
              <li>Max 12 f≈ë</li><li>Bajnoks√°g pontoz√≥lappal</li><li>Fot√≥z√°s</li>
            </ul>
            <a class="btn btn-primary" href="#booking">Id≈ëpontot k√©rek</a>
          </article>
        </div>
      </div>
    </section>

    <!-- FOGAL√ÅS / KAPCSOLAT ‚Äì ≈∞RLAP -->
    <section id="booking" class="section">
      <div class="container">
        <div class="heading">
          <h2>Foglalj id≈ëpontot</h2>
        </div>
        <p class="muted" style="max-width:65ch;margin:.2rem 0 1.2rem">T√∂ltsd ki az ≈±rlapot, √©s nyitvatart√°sban 1‚Äì2 √≥r√°n bel√ºl visszaigazolunk.</p>
        <div class="grid" style="grid-template-columns:repeat(auto-fit,minmax(280px,1fr))">
          <form id="contact-form" class="card form" action="https://formsubmit.co/ajax/dobosdomi09@gmail.com" method="POST" accept-charset="UTF-8">
            <input type="hidden" name="_subject" value="√öj foglal√°si k√©r√©s ‚Äì VR/Minigolf">
            <input type="hidden" name="_template" value="table">
            <input type="hidden" name="_captcha" value="false">
            <input type="text" name="_honey" style="display:none">

            <div class="field">
              <label for="name">N√©v</label>
              <input id="name" name="name" type="text" required placeholder="Teljes neved" autocomplete="name" />
              <small class="error" aria-live="polite"></small>
            </div>
            <div class="field">
              <label for="email">E-mail</label>
              <input id="email" name="email" type="email" required placeholder="te@pelda.hu" autocomplete="email" />
              <small class="error" aria-live="polite"></small>
            </div>

            <div class="grid" style="grid-template-columns:repeat(3,1fr);gap:.75rem">
              <div class="field">
                <label for="date">D√°tum</label>
                <input id="date" name="date" type="date" required />
                <small class="error"></small>
              </div>
              <div class="field">
                <label for="time">Id≈ë</label>
                <input id="time" name="time" type="time" required min="10:00" max="20:00" step="900" />
                <small class="error"></small>
              </div>
              <div class="field">
                <label for="people">L√©tsz√°m</label>
                <input id="people" name="people" type="number" min="1" max="12" value="4" />
                <small class="error"></small>
              </div>
            </div>

            <div class="field">
              <label for="package">Csomag</label>
              <select id="package" name="package" required>
                <option value="">V√°lassz csomagot‚Ä¶</option>
                <optgroup label="VR">
                  <option value="Alap VR">Alap VR</option>
                  <option value="Csapat VR">Csapat VR</option>
                </optgroup>
                <optgroup label="UV Minigolf">
                  <option value="Alap Minigolf">Alap Minigolf</option>
                  <option value="Csapat Minigolf">Csapat Minigolf</option>
                </optgroup>
                <optgroup label="Esem√©ny">
                  <option value="Party csomag">Party csomag</option>
                </optgroup>
              </select>
              <small class="error"></small>
            </div>

            <div class="field">
              <label for="message">Megjegyz√©s</label>
              <textarea id="message" name="message" rows="4" placeholder="Extra inf√≥: sz√ºlinap, csapat√©p√≠t√©s, k√ºl√∂n k√©r√©s‚Ä¶"></textarea>
              <small class="error"></small>
            </div>

            <button class="btn btn-primary" type="submit">K√©rem a visszaigazol√°st</button>
            <p id="form-status" role="status" class="status" hidden>K√∂sz√∂nj√ºk! Hamarosan felvessz√ºk veled a kapcsolatot e-mailben.</p>
          </form>

          <aside class="card" style="display:grid;gap:.75rem;align-content:start">
            <h3 style="margin:0">Hasznos tudnival√≥k</h3>
            <ul style="margin:0 0 .2rem 1.1rem">
              <li>√ârkezzetek 10 perccel el≈ëbb a r√∂vid eligaz√≠t√°s miatt.</li>
              <li>K√©nyelmes ruh√°zat aj√°nlott. Szem√ºveggel is haszn√°lhat√≥.</li>
              <li>14 √©ves kor alatt k√≠s√©r≈ë sz√ºks√©ges.</li>
              <li>Lemond√°s: 24 √≥r√°val el≈ëre d√≠jmentes.</li>
            </ul>
            <div style="display:grid;gap:.35rem;font-size:.95rem" class="muted">
              <div>üìû <a href="tel:+3612345678">+36 1 234 5678</a></div>
              <div>‚úâÔ∏è <a href="mailto:hello@vrszoba.hu">hello@vrszoba.hu</a></div>
              <div>üìç 6000 Kecskem√©t, Korh√°nk√∂zi u. 10/A</div>
            </div>
          </aside>
        </div>
      </div>
    </section>

    <!-- VR Gal√©ria -->
    <section id="gallery" class="section alt">
      <div class="container">
        <div class="heading">
          <h2>VR k√©pek</h2>
        </div>
        <p class="muted" style="max-width:65ch;margin:.2rem 0 1.2rem">Pillanatok a VR szob√°b√≥l ‚Äî mosoly, izgalom, √©s sok-sok nevet√©s.</p>
        <div class="grid" style="grid-template-columns:repeat(auto-fit,minmax(220px,1fr))">
          <img class="thumb-img" src="szoba-led.jpg?v=7"   alt="VR szoba lila LED vil√°g√≠t√°ssal" loading="lazy">
          <img class="thumb-img" src="szoba-feher.jpg?v=7" alt="Vil√°gos VR szoba, k√©t headsettel" loading="lazy">
          <img class="thumb-img" src="szoba-fa.jpg?v=7"    alt="VR szoba fa lamell√°s fallal" loading="lazy">
          <img class="thumb-img" src="szoba-neon.jpg?v=7"  alt="Neon keretes VR j√°t√©kt√©r" loading="lazy">
        </div>
      </div>
    </section>

    <!-- UV Minigolf Gal√©ria -->
    <section id="gallery-golf" class="section">
      <div class="container">
        <div class="heading">
          <h2>UV Minigolf k√©pek</h2>
        </div>
        <p class="muted" style="max-width:65ch;margin:.2rem 0 1.2rem">Neonos p√°lya, vil√°g√≠t√≥ akad√°lyok ‚Äî minden koroszt√°ly im√°dja.</p>
        <div class="grid" style="grid-template-columns:repeat(auto-fit,minmax(220px,1fr))">
          <img class="thumb-img" src="balna.jpeg"  alt="UV minigolf d√≠szlet ‚Äî b√°lna" loading="lazy">
          <img class="thumb-img" src="buvar.jpeg"  alt="UV minigolf d√≠szlet ‚Äî b√∫v√°r" loading="lazy">
          <img class="thumb-img" src="capa.jpeg"   alt="UV minigolf d√≠szlet ‚Äî c√°pa" loading="lazy">
          <img class="thumb-img" src="hajo.jpeg"   alt="UV minigolf d√≠szlet ‚Äî haj√≥" loading="lazy">
          <img class="thumb-img" src="teknos.jpeg" alt="UV minigolf d√≠szlet ‚Äî tekn≈ës" loading="lazy">
        </div>
      </div>
    </section>

    <!-- GYIK -->
    <section id="faq" class="section alt">
      <div class="container">
        <div class="heading">
          <h2>Gyakori k√©rd√©sek</h2>
        </div>
        <div class="grid" style="grid-template-columns:repeat(auto-fit,minmax(260px,1fr))">
          <article class="card"><h3>Hogyan kapok visszaigazol√°st?</h3><p>≈∞rlap ut√°n e-mailt k√ºld√ºnk, sz√ºks√©g eset√©n telefonon egyeztet√ºnk.</p></article>
          <article class="card"><h3>Milyen koroszt√°lynak aj√°nlott?</h3><p>VR: 12+, UV minigolf: 6+ k√≠s√©r≈ëvel. 14 √©v alatt k√≠s√©r≈ë sz√ºks√©ges.</p></article>
          <article class="card"><h3>Mit vegyek fel?</h3><p>K√©nyelmes ruha, z√°rt cip≈ë. A minigolfhoz vil√°gos ruh√°zat j√≥l mutat a f√©nyekben.</p></article>
          <article class="card"><h3>Higi√©nia</h3><p>VR arcp√°rna minden haszn√°lat el≈ëtt/ut√°n fert≈ëtlen√≠tve, k√©zfert≈ëtlen√≠t≈ë biztos√≠tott.</p></article>
          <article class="card"><h3>Fot√≥z√°s / vide√≥</h3><p>Sz√≠vesen seg√≠t√ºnk k√©peket k√©sz√≠teni. A p√°ly√°n is lehet fot√≥zni vaku n√©lk√ºl.</p></article>
          <article class="card"><h3>Parkol√°s</h3><p>A k√∂zelben t√∂bb utcai parkol√≥ √©s parkol√≥h√°z tal√°lhat√≥.</p></article>
        </div>
      </div>
    </section>

    <!-- Helysz√≠n & nyitvatart√°s -->
    <section id="contact" class="section">
      <div class="container">
        <div class="heading">
          <h2>K√∂nnyen megtal√°lsz</h2>
        </div>
        <p class="muted" style="max-width:65ch;margin:.2rem 0 1.2rem">Kecskem√©t belv√°ros√°ban. T√∂megk√∂zleked√©ssel √©s aut√≥val is egyszer≈±en megk√∂zel√≠thet≈ë.</p>
        <div class="grid" style="grid-template-columns:repeat(auto-fit,minmax(280px,1fr))">
          <div class="card">
            <h3>Helysz√≠n</h3>
            <p>6000 Kecskem√©t, Korh√°nk√∂zi u. 10/A</p>
            <p style="display:flex;gap:.6rem;flex-wrap:wrap">
              <a class="btn btn-ghost" href="https://maps.google.com/?q=Kecskem%C3%A9t%2C%20Korh%C3%A1nk%C3%B6zi%20u%2010%2FA%2C%206000" target="_blank" rel="noreferrer">Megnyit√°s Google Mapsben</a>
              <a class="btn btn-ghost" href="https://waze.com/ul?q=Kecskem%C3%A9t%2C%20Korh%C3%A1nk%C3%B6zi%20u%2010%2FA%2C%206000&navigate=yes" target="_blank" rel="noreferrer">Megnyit√°s Waze-ben</a>
            </p>
          </div>
          <div class="card">
            <h3>Nyitvatart√°s</h3>
            <div style="display:grid;grid-template-columns:1fr auto;gap:.4rem" class="muted">
              <span>H‚ÄìV</span><span>10:00 ‚Äì 20:00</span>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <div class="container">
      <p>¬© <span id="year"></span> UVR ‚Äî Minden jog fenntartva.</p>
    </div>
  </footer>

  <!-- Scroll reveal -->
  <script>
  (() => {
    const sel = [
      '#hero-vr .badge', '#hero-vr h1', '#hero-vr p', '#hero-vr .actions', '#hero-vr .hero-visual',
      '#hero-golf .heading', '#hero-golf p', '#hero-golf .actions',
      '#news .heading', '#news .card',
      '#quest3 .heading', '#quest3 img', '#quest3 li',
      '#features .heading', '#features .card',
      '#packages .heading', '#packages .card',
      '#booking .heading', '#booking form', '#booking aside',
      '#gallery .heading', '#gallery img',
      '#gallery-golf .heading', '#gallery-golf img',
      '#faq .heading', '#faq .card',
      '#contact .heading', '#contact .card', 'footer'
    ].join(',');

    const items = Array.from(document.querySelectorAll(sel));
    items.forEach((el, i) => {
      el.classList.add('reveal');
      el.style.transitionDelay = (i % 6) * 80 + 'ms';
    });

    const io = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) entry.target.classList.add('show');
        else entry.target.classList.remove('show');
      });
    }, { threshold: 0, rootMargin: '0px 0px -5% 0px' });

    items.forEach(el => io.observe(el));
  })();
  </script>

  <!-- Mobil men√º -->
  <script>
    const navToggle = document.querySelector('.nav-toggle');
    const siteMenu = document.querySelector('#site-menu');
    if (navToggle && siteMenu){
      navToggle.addEventListener('click', () => {
        const open = navToggle.getAttribute('aria-expanded') === 'true';
        navToggle.setAttribute('aria-expanded', String(!open));
        siteMenu.classList.toggle('show');
      });
    }
  </script>

  <!-- Mod√°lok + Lightbox -->
  <script>
  (() => {
    function wireModal(rootId, onOpen){
      const root = document.getElementById(rootId);
      if (!root) return;
      const closeBtn = root.querySelector('[data-close]');
      function open(){ root.hidden=false; requestAnimationFrame(()=>root.classList.add('show')); document.body.classList.add('modal-open'); onOpen && onOpen(); }
      function close(){ root.classList.remove('show'); document.body.classList.remove('modal-open'); setTimeout(()=>root.hidden=true,200); }
      root.addEventListener('click', e => { if (e.target === root) close(); });
      closeBtn && closeBtn.addEventListener('click', close);
      return { open, close, el: root };
    }

    const opening = wireModal('opening-notice');
    opening && opening.open();

    const auth = wireModal('auth-modal');
    document.getElementById('open-auth')?.addEventListener('click', (e)=>{ e.preventDefault(); auth && auth.open(); });

    const profile = wireModal('profile-modal');
    window.__profileModal = profile;

    const tabLogin = document.getElementById('tab-login');
    const tabSignup = document.getElementById('tab-signup');
    const panelLogin = document.getElementById('panel-login');
    const panelSignup = document.getElementById('panel-signup');
    function selectTab(which){
      const login = which === 'login';
      tabLogin.setAttribute('aria-selected', login?'true':'false');
      tabSignup.setAttribute('aria-selected', login?'false':'true');
      panelLogin.hidden = !login;
      panelSignup.hidden = login;
    }
    tabLogin?.addEventListener('click', ()=>selectTab('login'));
    tabSignup?.addEventListener('click', ()=>selectTab('signup'));
    selectTab('login');

    window.__authModal = auth;

    // LIGHTBOX
    const lightbox = wireModal('lightbox-modal');
    const lbImg = document.getElementById('lightbox-img');
    const lbCap = document.getElementById('lightbox-cap');

    function openLightbox(src, altText){
      if (!lightbox) return;
      lbImg.src = src;
      lbImg.alt = altText || '';
      lbCap.textContent = altText || '';
      lightbox.open();
    }

    const imgs = document.querySelectorAll('img:not(.brand-logo)');
    imgs.forEach(img => {
      img.classList.add('lightboxable');
      img.addEventListener('click', (e) => {
        e.preventDefault?.();
        e.stopPropagation?.();
        const full = img.dataset.full || img.currentSrc || img.src;
        openLightbox(full, img.alt || '');
      });
    });

    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && lightbox && !lightbox.el.hidden){
        lightbox.close();
      }
    });
  })();
  </script>

  <!-- FormSubmit AJAX -->
  <script>
  (() => {
    const form = document.getElementById('contact-form');
    const statusEl = document.getElementById('form-status');
    if (!form) return;

    function setError(input, msg){ const err = input.nextElementSibling; if (err) err.textContent = msg || ''; }

    function validTimeInRange(value){
      const m = /^(\d{2}):(\d{2})$/.exec(value || '');
      if (!m) return false;
      const hh = Number(m[1]), mm = Number(m[2]);
      if (hh<0 || hh>23 || mm<0 || mm>59) return false;
      const minutes = hh*60 + mm;
      return minutes >= 10*60 && minutes <= 20*60;
    }

    function validate(){
      let ok = true;
      const req = ['name','email','date','time','package'];
      req.forEach(id=>{
        const el = document.getElementById(id);
        if (!el) return;
        if (!el.value.trim()){
          setError(el,'K√©rlek t√∂ltsd ki ezt a mez≈ët.'); ok=false;
        } else if (id==='email' && !/^[^@\s]+@[^@\s]+\.[^@\s]+$/.test(el.value)){
          setError(el,'Adj meg √©rv√©nyes e-mail c√≠met.'); ok=false;
        } else if (id==='time' && !validTimeInRange(el.value)){
          setError(el,'K√©rlek 10:00 √©s 20:00 k√∂z√∂tti id≈ëpontot v√°lassz.');
          ok=false;
        } else {
          setError(el,'');
        }
      });
      return ok;
    }

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      if (!validate()) return;

      const data = Object.fromEntries(new FormData(form).entries());
      try{
        const resp = await fetch(form.action, {
          method:'POST',
          headers:{ 'Content-Type':'application/json', 'Accept':'application/json' },
          body: JSON.stringify(data)
        });
        if (!resp.ok) throw new Error('H√°l√≥zati hiba');
        statusEl.textContent = 'K√∂sz√∂nj√ºk! Hamarosan felvessz√ºk veled a kapcsolatot e-mailben.';
        statusEl.hidden = false;
        form.reset();
        setTimeout(()=> statusEl.hidden = true, 5000);
      }catch(err){
        statusEl.textContent = 'Hopp! Valami elromlott. K√©rlek pr√≥b√°ld √∫jra k√©s≈ëbb.';
        statusEl.hidden = false;
        setTimeout(()=> statusEl.hidden = true, 5000);
      }
    });
  })();
  </script>

  <!-- Supabase auth + felhaszn√°l√≥n√©v -->
  <script type="module">
    import { createClient } from 'https://esm.sh/@supabase/supabase-js@2';

    const SUPABASE_URL = 'https://opaxjkektkvbktzsyjmn.supabase.co';
    const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9wYXhqa2VrdGt2Ymt0enN5am1uIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU5NDgyNDIsImV4cCI6MjA3MTUyNDI0Mn0.08MuTnZZoIst55SmRXVKkTrLLjnxBMnHVc5U_pbovUM';
    const supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY, { auth: { persistSession: true, autoRefreshToken: true } });

    const openAuthBtn   = document.getElementById('open-auth');
    const openProfileBtn= document.getElementById('open-profile');
    const logoutBtn     = document.getElementById('logout-btn');
    const userChip      = document.getElementById('user-chip');
    const displayNameEl = document.getElementById('display-name');

    function getDisplayName(user){
      const uname = user?.user_metadata?.username;
      return (uname && String(uname).trim()) ? uname.trim() : (user?.email || '');
    }

    function renderUser(user){
      if (user && (user.email || user.user_metadata)){
        displayNameEl.textContent = getDisplayName(user);
        userChip.hidden = false;
        logoutBtn.hidden = false;
        openProfileBtn.hidden = false;
        openAuthBtn.hidden = true;
      } else {
        displayNameEl.textContent = '';
        userChip.hidden = true;
        logoutBtn.hidden = true;
        openProfileBtn.hidden = true;
        openAuthBtn.hidden = false;
      }
    }

    renderUser(null);
    (async () => {
      const { data: { session } } = await supabase.auth.getSession();
      renderUser(session?.user || null);
    })();

    supabase.auth.onAuthStateChange((_event, session) => {
      renderUser(session?.user || null);
    });

    logoutBtn?.addEventListener('click', async (e) => {
      e.preventDefault();
      try{
        const { error } = await supabase.auth.signOut();
        if (error) throw error;
        renderUser(null);
      }catch(err){
        alert('Kijelentkez√©s sikertelen: ' + (err?.message || err));
      }
    });

    document.getElementById('open-profile')?.addEventListener('click', async (e) => {
      e.preventDefault();
      const { data: { user } } = await supabase.auth.getUser();
      const input = document.getElementById('profile-username');
      input.value = user?.user_metadata?.username || '';
      window.__profileModal?.open?.();
    });

    const profileForm   = document.getElementById('profile-form');
    const profileStatus = document.getElementById('profile-status');
    profileForm?.addEventListener('submit', async (e) => {
      e.preventDefault();
      const username = document.getElementById('profile-username').value.trim();
      if (!/^[a-zA-Z0-9_]{3,20}$/.test(username)){
        profileStatus.textContent = '√ârv√©nytelen felhaszn√°l√≥n√©v. Csak bet≈±/sz√°m/‚Äû_‚Äù, 3‚Äì20 karakter.';
        profileStatus.hidden = false;
        return;
      }
      try{
        const { error } = await supabase.auth.updateUser({ data: { username } });
        if (error) throw error;
        profileStatus.textContent = 'Mentve ‚úî';
        profileStatus.hidden = false;
        const { data: { user } } = await supabase.auth.getUser();
        renderUser(user || null);
        setTimeout(()=> window.__profileModal?.close?.(), 800);
      }catch(err){
        profileStatus.textContent = 'Hiba: ' + (err?.message || err);
        profileStatus.hidden = false;
      }
    });

    const loginForm = document.getElementById('login-form');
    const loginStatus = document.getElementById('login-status');
    loginForm?.addEventListener('submit', async (e) => {
      e.preventDefault();
      const email = document.getElementById('login-email').value.trim();
      const password = document.getElementById('login-password').value;
      const { error } = await supabase.auth.signInWithPassword({ email, password });
      if (error){
        loginStatus.textContent = 'Hiba: ' + error.message;
        loginStatus.hidden = false;
      } else {
        loginStatus.textContent = 'Sikeres bel√©p√©s!';
        loginStatus.hidden = false;
        window.__authModal?.close?.();
      }
    });

    const signupForm = document.getElementById('signup-form');
    const signupStatus = document.getElementById('signup-status');
    signupForm?.addEventListener('submit', async (e) => {
      e.preventDefault();
      const email    = document.getElementById('signup-email').value.trim();
      const password = document.getElementById('signup-password').value;
      const username = document.getElementById('signup-username').value.trim();
      if (username && !/^[a-zA-Z0-9_]{3,20}$/.test(username)){
        signupStatus.textContent = '√ârv√©nytelen felhaszn√°l√≥n√©v. Csak bet≈±/sz√°m/‚Äû_‚Äù, 3‚Äì20 karakter.';
        signupStatus.hidden = false;
        return;
      }
      const redirectTo = window.location.origin + '/vr-szoba/';
      const { error } = await supabase.auth.signUp({
        email, password,
        options: { emailRedirectTo: redirectTo, data: username ? { username } : {} }
      });
      if (error){
        signupStatus.textContent = 'Hiba: ' + error.message;
        signupStatus.hidden = false;
      } else {
        signupStatus.textContent = 'Elk√ºldt√ºk a meger≈ës√≠t≈ë e-mailt. K√©rlek kattints a lev√©lben a linkre.';
        signupStatus.hidden = false;
      }
    });

    (async () => {
      const url = new URL(window.location.href);
      const token_hash = url.searchParams.get('token_hash');
      const type = url.searchParams.get('type');
      if (token_hash && type){
        const { error } = await supabase.auth.verifyOtp({ token_hash, type });
        if (!error){
          history.replaceState({}, '', window.location.pathname);
          const { data: { user } } = await supabase.auth.getUser();
          renderUser(user || null);
        } else {
          alert('E-mail meger≈ës√≠t√©s hiba: ' + error.message);
        }
      }
    })();
  </script>

  <!-- Struktur√°lt adatok -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "EntertainmentBusiness",
    "name": "UVR",
    "description": "VR szoba √©s UV minigolf p√°lya Kecskem√©ten. Sz√ºlinap, csapat√©p√≠t√©s √©s bar√°ti programok.",
    "address": {
      "@type": "PostalAddress",
      "streetAddress": "Korh√°nk√∂zi u. 10/A",
      "addressLocality": "Kecskem√©t",
      "postalCode": "6000",
      "addressCountry": "HU"
    },
    "telephone": "+36 1 234 5678",
    "sameAs": [],
    "openingHoursSpecification": [
      {
        "@type": "OpeningHoursSpecification",
        "dayOfWeek": ["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],
        "opens": "10:00",
        "closes": "20:00"
      }
    ]
  }
  </script>

  <!-- SW regisztr√°ci√≥ + √©v -->
  <script>
  if ('serviceWorker' in navigator) {
    let refreshing = false;
    navigator.serviceWorker.addEventListener('controllerchange', () => {
      if (refreshing) return;
      refreshing = true;
      window.location.reload();
    });
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('/vr-szoba/sw.js');
    });
  }
  document.getElementById('year').textContent = new Date().getFullYear();
  </script>
</body>
</html>
